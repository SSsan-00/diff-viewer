# diff-viewer 利用マニュアル

## 1. 概要
- 左右2つのコードを並べて差分を確認できます。
- 複数ファイルをまとめて読み込んで比較できます（ファイル単位の行番号やジャンプに対応）。

## 2. 起動方法
- `htmlファイル` を **file:// 直開き**で利用できます（サーバ不要）。

## 3. ファイルの読み込み
### 単一/複数ファイルの読み込み
- 各ペインの「ファイルを選択」から読み込みます。
- 複数ファイルを選ぶと、ペイン内でファイルごとに連結表示されます。
- ペイン内へドラッグ&ドロップして読み込むこともできます。
- `cshtml`→`cshtml.cs`ファイルの順で選んでも`cshtml.cs`→`cshtml`ファイルの順で読み込みます。

### ファイルカード
- 読み込んだファイルは **ファイルカード**として横並びに表示されます。
- カードをクリックすると **該当ファイルの先頭**へジャンプします。

## 4. 差分の操作
### 差分再計算
- 「差分再計算」で現在の内容を即座に再比較します。
- 編集を行った際に基本的にリアルタイムで差分を再計算しますが、万が一即座に反映されない現象が発生したときの利用を想定しています。

### スクロール連動
- 「スクロール連動」トグルで ON/OFF を切り替えます。

### 差分ジャンプ
- 「次の差分 / 前の差分」で差分位置(ブロック単位)へ移動します。

### 差分のみ表示
- 「差分のみ表示」トグルで差分の無い行を折りたたみます。

### クリア
- 画面右上の「クリア」で左右の内容をまとめて消去します。
- 各ペインの「クリア」で片側のみ消去します（アンカーは左右とも消えます）。
- 各ペインの「クリア」は Ctrl+Z で内容とアンカーを復元できます。

## 5. アンカー
- アンカーは「左右の対応行を固定する」ための目印です。
- 行番号領域をクリックしてアンカーを追加/解除します。
- Ctrl+L でもアンカーを追加/解除できます。
- アンカー一覧から該当行へジャンプできます。
- アンカー一覧で選択中は ↑/↓ で選択を移動できます。
- アンカー一覧の削除ボタンでアンカーを削除できます。

## 6. 行ジャンプ（Ctrl+G）
- **ファイル単位の行番号**でジャンプします。
- デフォルト対象は **フォーカス中のペインのファイル**です。
- 行ジャンプUIのファイル選択で対象ファイルを切り替えられます。

## 7. 折り返し（Alt+Z）
- Alt+Z で左右ペインの折り返しを切り替えます。
- 折り返し中は対応行が横に並ばないことがあるため、必要な範囲での部分的な利用を想定しています。

## 8. ワークスペース（タイトル部分）
### 開閉
- 画面左上のタイトル（ワークスペース名）をクリックすると開閉します。
- Alt+N で開閉をトグルできます（フォーカス位置に関係なく動作します）。

### 作成・選択
- 「＋」で新規作成します（最大10件）。
- 一覧の名前をクリックすると選択できます。
- ワークスペースUIが開いている間は ↑/↓ で選択を移動できます。
- 選択中に Enter を押すと、そのワークスペースを開いてUIを閉じます。

### リネーム・削除
- ペンアイコンで名前を編集します（最大25文字、空文字不可）。
- ゴミ箱アイコンで削除できます（最後の1件は削除不可）。削除時は確認が表示されます。

### 並び替え
- ドラッグ&ドロップで順序を入れ替えます。

## 9. パス登録UI（Ctrl+P）
### 開閉
- 「パス登録」ボタン、または Ctrl+P で開閉します。
- 閉じる操作は「閉じる」「Esc」「外クリック」「トグル再押下」に対応します。
  - パス登録は **ワークスペースごとに独立**しています。
  - Ctrl+P で開く対象は「最後に操作したペイン」です（不明な場合は左）。

### 登録
- 入力欄にパスを入力し「追加」を押します。
- 文字入力を始めると入力欄にフォーカスが移動します。

### コピー
- 登録済みパスをクリックするとコピーされます。
- ↑/↓ で選択を移動し、Enter で選択中のパスをコピーします。

### 削除
- 削除ボタンで削除できます。
- 選択中に Delete で削除できます。

### 並び替え
- ドラッグ&ドロップで並び替えます。

## 10. 検索・テーマ・ハイライト
### 検索（Ctrl+F）
- フォーカス中のペインに検索UIを開きます。

### ペイン移動（Ctrl+J / Ctrl+K）
- Ctrl+J で左ペイン、Ctrl+K で右ペインに移動します。

### テーマ切り替え
- ヘッダーのテーマトグルでライト/ダークを切り替えます。

### シンタックスハイライト
- 「ハイライト」トグルで ON/OFF を切り替えます。

## 11. ショートカット一覧（Windows）
- Ctrl+F: 検索UIを開く（フォーカス中のペイン）
- Ctrl+G: 行ジャンプUIを開く（ファイル単位）
- Ctrl+J / Ctrl+K: 左ペイン / 右ペインにフォーカス移動
- Ctrl+L: アンカーを追加/解除
- Ctrl+P: パス登録UIの開閉（最後に操作したペイン）
- Alt+Z: 折り返しの切り替え
- Alt+N: ワークスペースUIの開閉
- ワークスペースUI: ↑/↓ で選択移動、Enter で選択を確定して閉じる
- アンカー一覧: ↑/↓ で選択移動
- パス登録UI: ↑/↓ で選択移動、Enter でコピー、Delete で削除
